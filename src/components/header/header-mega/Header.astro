---
import "./Header.css";
import { MegaMenuIcon } from '../../MegaMenuIcons.tsx';
import ButtonPrimary from '../../buttons/primary/ButtonPrimary.astro';
---

<header class="header-mega">
  <div class="container">
    <div class="header-mega-content">
      <div class="logo">
        <a href="/">
          <img src="/images/logo.svg" alt="Logo" class="logo-img" />
        </a>
      </div>
      
      <nav class="nav-mega desktop-nav">
        <div class="nav-item-mega">
          <a href="/" class="nav-link-mega">Home</a>
        </div>
        
        
        
        <div class="nav-item-mega">
          <a href="/components" class="nav-link-mega">Components</a>
        </div>
        
        <div class="nav-item-mega">
          <a href="/global-styles/global-styles" class="nav-link-mega">Global Styles</a>
        </div>
        
        <div class="nav-item-mega">
          <a href="/docs/docs" class="nav-link-mega">Docs</a>
        </div>
        
      </nav>
      
      <div class="header-mega-actions">
        <div class="buy-desktop">
          <ButtonPrimary href="/buy">
            Buy Template
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M7 17L17 7M17 7H7M17 7V17"/>
            </svg>
          </ButtonPrimary>
        </div>
        
        <button class="menu-toggle mobile-nav" id="menu-toggle-mega">
          <span></span>
          <span></span>
          <span></span>
        </button>
      </div>
    </div>
    
    <div class="mobile-overlay" id="mobile-overlay-mega"></div>
    <nav class="mobile-nav-menu" id="mobile-nav-mega">
      <div class="mobile-nav-header">
        <img src="/images/logo.svg" alt="Logo" class="mobile-logo" />
        <button class="mobile-close-btn" id="mobile-close-mega">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <line x1="18" y1="6" x2="6" y2="18"/>
            <line x1="6" y1="6" x2="18" y2="18"/>
          </svg>
        </button>
      </div>
      <div class="mobile-nav-links">
        <a href="/" class="mobile-nav-link">Home</a>
        
        
        
        <a href="/components" class="mobile-nav-link">Components</a>
        
        <a href="/global-styles/global-styles" class="mobile-nav-link">Global Styles</a>
        <a href="/docs/docs" class="mobile-nav-link">Docs</a>
        
      </div>
      <div class="mobile-nav-footer">
        <ButtonPrimary href="/buy">
          Buy Template
        </ButtonPrimary>
      </div>
    </nav>
  </div>
</header>

<script>
  const menuToggle = document.getElementById('menu-toggle-mega');
  const mobileNav = document.getElementById('mobile-nav-mega');
  const mobileOverlay = document.getElementById('mobile-overlay-mega');
  const mobileClose = document.getElementById('mobile-close-mega');

  function closeMenu() {
    if (mobileNav) mobileNav.classList.remove('active');
    if (mobileOverlay) mobileOverlay.classList.remove('active');
    document.body.classList.remove('menu-open');
    if (menuToggle) menuToggle.classList.remove('active');
  }

  function openMenu() {
    if (mobileNav) mobileNav.classList.add('active');
    if (mobileOverlay) mobileOverlay.classList.add('active');
    document.body.classList.add('menu-open');
    if (menuToggle) menuToggle.classList.add('active');
  }

  if (menuToggle && mobileNav && mobileOverlay && mobileClose) {
    menuToggle.addEventListener('click', () => {
      if (mobileNav.classList.contains('active')) {
        closeMenu();
      } else {
        openMenu();
      }
    });

    mobileClose.addEventListener('click', closeMenu);
    mobileOverlay.addEventListener('click', closeMenu);

    // Close menu when clicking on links (but not on toggle links)
    const mobileLinks = mobileNav.querySelectorAll('.mobile-nav-link:not(.mobile-nav-toggle), .mobile-submenu-link, .mobile-login-btn');
    mobileLinks.forEach(link => {
      link.addEventListener('click', closeMenu);
    });

    // Handle mobile submenu toggles
    const mobileToggles = mobileNav.querySelectorAll('.mobile-nav-toggle');
    mobileToggles.forEach(toggle => {
      toggle.addEventListener('click', (e) => {
        e.preventDefault();
        const navItem = toggle.parentElement;
        if (!navItem) return;
        
        const isOpen = navItem.classList.contains('open');
        
        // Close all other submenus
        mobileNav.querySelectorAll('.mobile-nav-item').forEach(item => {
          item.classList.remove('open');
        });
        
        // Toggle current submenu
        if (!isOpen) {
          navItem.classList.add('open');
        }
      });
    });
  }
</script>

