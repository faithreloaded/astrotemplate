---
import "./Header.css";
import { MegaMenuIcon } from '../../MegaMenuIcons.tsx';
import ButtonPrimary from '../../buttons/primary/ButtonPrimary.astro';
---

<header class="header-mega">
  <div class="container">
    <div class="header-mega-content">
      <div class="logo">
        <a href="/">
          <img src="/images/logo.svg" alt="Logo" class="logo-img" />
        </a>
      </div>
      
      <nav class="nav-mega desktop-nav">
        <div class="nav-item-mega">
          <a href="/" class="nav-link-mega">Home</a>
        </div>
        
        <div class="nav-item-mega dropdown-mega">
          <span class="nav-link-mega">
            Sections
            <svg class="dropdown-icon" width="12" height="12" viewBox="0 0 12 12" fill="none">
              <path d="M3 4.5L6 7.5L9 4.5" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
          </span>
          <div class="mega-menu">
            <div class="mega-menu-content">
              <div class="mega-menu-column">
                <a href="/heroes" class="mega-menu-item">
                  <div class="mega-menu-icon">
                    <MegaMenuIcon name="Layout" size={20} client:load />
                  </div>
                  <div class="mega-menu-text">
                    <h4>Hero</h4>
                    <p>Landing page hero sections</p>
                  </div>
                </a>
                
                <a href="/faqs" class="mega-menu-item">
                  <div class="mega-menu-icon">
                    <MegaMenuIcon name="HelpCircle" size={20} client:load />
                  </div>
                  <div class="mega-menu-text">
                    <h4>FAQ</h4>
                    <p>Frequently asked questions</p>
                  </div>
                </a>
                
                <a href="/testimonials" class="mega-menu-item">
                  <div class="mega-menu-icon">
                    <MegaMenuIcon name="Users" size={20} client:load />
                  </div>
                  <div class="mega-menu-text">
                    <h4>Testimonials</h4>
                    <p>Customer reviews and testimonials</p>
                  </div>
                </a>
              </div>
              
              <div class="mega-menu-column">
                <a href="/pricing" class="mega-menu-item">
                  <div class="mega-menu-icon">
                    <MegaMenuIcon name="CreditCard" size={20} client:load />
                  </div>
                  <div class="mega-menu-text">
                    <h4>Pricing</h4>
                    <p>Plans and pricing tables</p>
                  </div>
                </a>
                
                <a href="/ctas" class="mega-menu-item">
                  <div class="mega-menu-icon">
                    <MegaMenuIcon name="Zap" size={20} client:load />
                  </div>
                  <div class="mega-menu-text">
                    <h4>CTA</h4>
                    <p>Call-to-action sections</p>
                  </div>
                </a>
                
                <a href="/features" class="mega-menu-item">
                  <div class="mega-menu-icon">
                    <MegaMenuIcon name="Layers" size={20} client:load />
                  </div>
                  <div class="mega-menu-text">
                    <h4>Features</h4>
                    <p>Product features showcase</p>
                  </div>
                </a>
                
              </div>
            </div>
            
            <div class="mega-menu-actions">
                  <ButtonPrimary href="/sections" width="full">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                      <polygon points="5,3 19,12 5,21 5,3"/>
                    </svg>
                    View All Sections
                  </ButtonPrimary>
            </div>
          </div>
        </div>
        
        <div class="nav-item-mega dropdown-mega">
          <a href="/components" class="nav-link-mega">
            Components
            <svg class="dropdown-icon" width="12" height="12" viewBox="0 0 12 12" fill="none">
              <path d="M3 4.5L6 7.5L9 4.5" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
          </a>
          <div class="mega-menu">
            <div class="mega-menu-content">
              <div class="mega-menu-column">
                <a href="/buttons" class="mega-menu-item">
                  <div class="mega-menu-icon">
                    <MegaMenuIcon name="Square" size={20} client:load />
                  </div>
                  <div class="mega-menu-text">
                    <h4>Buttons</h4>
                    <p>Interactive button components</p>
                  </div>
                </a>
                
                <div class="mega-menu-item">
                  <div class="mega-menu-icon">
                    <MegaMenuIcon name="Navigation" size={20} client:load />
                  </div>
                  <div class="mega-menu-text">
                    <h4>Headers</h4>
                    <p>Navigation header layouts</p>
                  </div>
                </div>
                
                <div class="mega-menu-item">
                  <div class="mega-menu-icon">
                    <MegaMenuIcon name="Layout" size={20} client:load />
                  </div>
                  <div class="mega-menu-text">
                    <h4>Footers</h4>
                    <p>Footer layout components</p>
                  </div>
                </div>
              </div>
              
              <div class="mega-menu-column">
                <a href="/cards" class="mega-menu-item">
                  <div class="mega-menu-icon">
                    <MegaMenuIcon name="Calendar" size={20} client:load />
                  </div>
                  <div class="mega-menu-text">
                    <h4>Cards</h4>
                    <p>Content card layouts</p>
                  </div>
                </a>
                
                <a href="/badges" class="mega-menu-item">
                  <div class="mega-menu-icon">
                    <MegaMenuIcon name="Tag" size={20} client:load />
                  </div>
                  <div class="mega-menu-text">
                    <h4>Badges</h4>
                    <p>Material UI inspired badges</p>
                  </div>
                </a>
                
                <a href="/pills" class="mega-menu-item">
                  <div class="mega-menu-icon">
                    <MegaMenuIcon name="Circle" size={20} client:load />
                  </div>
                  <div class="mega-menu-text">
                    <h4>Pills</h4>
                    <p>Elegant pill components</p>
                  </div>
                </a>
                
                <div class="mega-menu-item">
                  <div class="mega-menu-icon">
                    <MegaMenuIcon name="Settings" size={20} client:load />
                  </div>
                  <div class="mega-menu-text">
                    <h4>Modals</h4>
                    <p>Dialog and modal windows</p>
                  </div>
                </div>
              </div>
            </div>
            
            <div class="mega-menu-actions">
                  <ButtonPrimary href="/components" width="full">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                      <polygon points="5,3 19,12 5,21 5,3"/>
                    </svg>
                    View All Components
                  </ButtonPrimary>
            </div>
          </div>
        </div>
        
        <div class="nav-item-mega">
          <a href="/global-styles/global-styles" class="nav-link-mega">Global Styles</a>
        </div>
        
        <div class="nav-item-mega">
          <a href="/docs/docs" class="nav-link-mega">Docs</a>
        </div>
        
      </nav>
      
      <div class="header-mega-actions">
        <ButtonPrimary href="/buy" class="desktop-nav">
          Buy Template
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M7 17L17 7M17 7H7M17 7V17"/>
          </svg>
        </ButtonPrimary>
        
        <button class="menu-toggle mobile-nav" id="menu-toggle-mega">
          <span></span>
          <span></span>
          <span></span>
        </button>
      </div>
    </div>
    
    <div class="mobile-overlay" id="mobile-overlay-mega"></div>
    <nav class="mobile-nav-menu" id="mobile-nav-mega">
      <div class="mobile-nav-header">
        <img src="/images/logo.svg" alt="Logo" class="mobile-logo" />
        <button class="mobile-close-btn" id="mobile-close-mega">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <line x1="18" y1="6" x2="6" y2="18"/>
            <line x1="6" y1="6" x2="18" y2="18"/>
          </svg>
        </button>
      </div>
      <div class="mobile-nav-links">
        <a href="/" class="mobile-nav-link">Home</a>
        
        <div class="mobile-nav-item">
          <a href="/sections" class="mobile-nav-link mobile-nav-toggle">
            Sections
            <svg class="mobile-dropdown-icon" width="12" height="12" viewBox="0 0 12 12" fill="none">
              <path d="M3 4.5L6 7.5L9 4.5" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
          </a>
          <div class="mobile-submenu">
            <a href="/heroes" class="mobile-submenu-link">Hero</a>
            <a href="/faqs" class="mobile-submenu-link">FAQ</a>
            <a href="/testimonials" class="mobile-submenu-link">Testimonials</a>
            <a href="/pricing" class="mobile-submenu-link">Pricing</a>
            <a href="/ctas" class="mobile-submenu-link">CTA</a>
            <a href="/features" class="mobile-submenu-link">Features</a>
            <a href="/badges" class="mobile-submenu-link">Badges</a>
          </div>
        </div>
        
        <div class="mobile-nav-item">
          <a href="/components" class="mobile-nav-link mobile-nav-toggle">
            Components
            <svg class="mobile-dropdown-icon" width="12" height="12" viewBox="0 0 12 12" fill="none">
              <path d="M3 4.5L6 7.5L9 4.5" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
          </a>
          <div class="mobile-submenu">
            <a href="/buttons" class="mobile-submenu-link">Buttons</a>
            <a href="/headers" class="mobile-submenu-link">Headers</a>
            <a href="/footers" class="mobile-submenu-link">Footers</a>
            <a href="/cards" class="mobile-submenu-link">Cards</a>
            <a href="/badges" class="mobile-submenu-link">Badges</a>
            <a href="/pills" class="mobile-submenu-link">Pills</a>
            <a href="/modals" class="mobile-submenu-link">Modals</a>
          </div>
        </div>
        
        <a href="/global-styles/global-styles" class="mobile-nav-link">Global Styles</a>
        <a href="/docs/docs" class="mobile-nav-link">Docs</a>
        
      </div>
      <div class="mobile-nav-footer">
        <ButtonPrimary href="/buy">
          Buy Template
        </ButtonPrimary>
      </div>
    </nav>
  </div>
</header>

<script>
  const menuToggle = document.getElementById('menu-toggle-mega');
  const mobileNav = document.getElementById('mobile-nav-mega');
  const mobileOverlay = document.getElementById('mobile-overlay-mega');
  const mobileClose = document.getElementById('mobile-close-mega');

  function closeMenu() {
    if (mobileNav) mobileNav.classList.remove('active');
    if (mobileOverlay) mobileOverlay.classList.remove('active');
    document.body.classList.remove('menu-open');
    if (menuToggle) menuToggle.classList.remove('active');
  }

  function openMenu() {
    if (mobileNav) mobileNav.classList.add('active');
    if (mobileOverlay) mobileOverlay.classList.add('active');
    document.body.classList.add('menu-open');
    if (menuToggle) menuToggle.classList.add('active');
  }

  if (menuToggle && mobileNav && mobileOverlay && mobileClose) {
    menuToggle.addEventListener('click', () => {
      if (mobileNav.classList.contains('active')) {
        closeMenu();
      } else {
        openMenu();
      }
    });

    mobileClose.addEventListener('click', closeMenu);
    mobileOverlay.addEventListener('click', closeMenu);

    // Close menu when clicking on links (but not on toggle links)
    const mobileLinks = mobileNav.querySelectorAll('.mobile-nav-link:not(.mobile-nav-toggle), .mobile-submenu-link, .mobile-login-btn');
    mobileLinks.forEach(link => {
      link.addEventListener('click', closeMenu);
    });

    // Handle mobile submenu toggles
    const mobileToggles = mobileNav.querySelectorAll('.mobile-nav-toggle');
    mobileToggles.forEach(toggle => {
      toggle.addEventListener('click', (e) => {
        e.preventDefault();
        const navItem = toggle.parentElement;
        if (!navItem) return;
        
        const isOpen = navItem.classList.contains('open');
        
        // Close all other submenus
        mobileNav.querySelectorAll('.mobile-nav-item').forEach(item => {
          item.classList.remove('open');
        });
        
        // Toggle current submenu
        if (!isOpen) {
          navItem.classList.add('open');
        }
      });
    });
  }
</script>

